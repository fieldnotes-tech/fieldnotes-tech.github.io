<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>YES/NO Boolean Env Vars | fieldnotes.tech</title>

    <style>body{margin:40px auto;max-width:650px;line-height:1.6;font-size:18px;color:#444;padding:0 10px}h1,h2,h3{line-height:1.2}div.header h1{padding-top:0;padding-bottom:8px;margin-bottom:24px;font-size:18px;font-weight:400;border-bottom:1px solid}.header-menu{float:right}ul.pagination{list-style-type:none;text-align:center;padding:0}ul.pagination>li{padding:0 8px;display:inline-block}div.footer{border-top:1px solid;text-align:center}img{max-width:100%;max-height:100%;display:block;margin-left:auto;margin-right:auto}</style>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-135580398-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


    
</head>

<body>
<div class="header">
    <h1>
        <a href="/">fieldnotes.tech</a>
        <div class="header-menu">
        </div>
    </h1>
</div>
<div id="content">

<header>
    <h1>YES/NO Boolean Env Vars</h1>
    

<div class="post-meta">
    Date &#x5b;
    <time datetime="2019-06-25">Jun 25, 2019</time>
    &#x5d;
    Tags &#x5b;
    <a href="https://fieldnotes.tech/tags/nitpick/">nitpick</a>
    <a href="https://fieldnotes.tech/tags/readability/">readability</a>
    <a href="https://fieldnotes.tech/tags/bash/">bash</a>
    &#x5d;
</div>
</header>
<article>
    <p>I use <code>YES</code> and <code>NO</code> in environment variables to store Boolean values. I have come to the conclusion that this is in some way optimal after trying all the other obvious options and finding that each has readability flaws:</p>

<ul>
<li><code>0</code> and <code>1</code> are confusing in POSIX shells like bash, because <code>return 0</code> and <code>exit 0</code> usually mean &ldquo;success&rdquo; (the command did not fail) which we think of as truthy. Likewise, <code>1</code> or any other non-zero number is treated as failure in these contexts, which intuitively feels falseish. Most other programming languages like C treat <code>0</code> as false and <code>1</code> as true. Potential confusion abounds.</li>
<li><code>true</code> and <code>false</code> (strings) both work, and are not too bad. However there are shell builtin functions with these same names, which can occasionally be confusing. Why entertain that risk?!</li>
<li>The <em>empty</em> or <em>nonempty</em> string is pretty bad. If you arbitrarily set it to <code>true</code>, <code>1</code> or <code>YES</code> to be nonempty, then you can guarantee someone will try setting it to <code>false</code>, <code>0</code> or <code>NO</code>, and be gravely disappointed at the result.</li>
<li>The <em>set</em> or <em>not set</em> variable is the worst of all worlds. It inherits the same issues as the empty or nonempty string, but has some extra quirks all of its own. Unsetting a variable in your own interactive shell isn&rsquo;t that bad <code>unset VAR</code> and you&rsquo;re done. However, passing that command down through a stack of Makefiles, scripts, Docker run invocations etc is impossible. Some might try to be clever and set the var to empty, but it doesn&rsquo;t work. Time to get editing that stack of turtles. Be kind, give your users a knob they can use at a distance.</li>
</ul>

<p><code>YES</code> and <code>NO</code> cannot be confused with shell builtins, or implicit integer conversations to bools, and the words map rather intuitively to true and false respectively.</p>

<p>The comparison I usually use in practice is:</p>

<pre><code>if [ $VAR = YES ]; then
  echo You said yes!
fi
</code></pre>

<p>Completely ignoring the potential <code>NO</code> value, treating anything that&rsquo;s not <code>YES</code> as false. Coupling this with default false values for options dictated by env vars usually makes this safe. If you really need a decision to have been made (i.e. it is not safe to default to false) then you might want to fail if it&rsquo;s not set explicitly to <code>YES</code> or <code>NO</code>.</p>

<p>Using <code>YES</code> and <code>NO</code> simply sidesteps many potential readability and usability downsides with the other methods.</p>

<p>Am I right or am I wrong? Let me know in the comments!</p>

</article>


    </div>
<div class="footer">
    
    

    
    
    <div class="copyright">&amp;copy; Sam Salisbury 2019</div>
    
</div>
</body>

</html>